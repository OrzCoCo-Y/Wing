(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-66d28b03"],{3247:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("d2-container",[a("template",{slot:"header"},[a("div",[a("el-input",{staticClass:"search",staticStyle:{width:"200px"},attrs:{clearable:"",placeholder:"请输入事务名称"},on:{change:e.search},model:{value:e.pageModel.data.name,callback:function(t){e.$set(e.pageModel.data,"name",t)},expression:"pageModel.data.name"}}),a("el-input",{staticClass:"search",staticStyle:{width:"200px"},attrs:{clearable:"",placeholder:"请输入服务名称"},on:{change:e.search},model:{value:e.pageModel.data.serviceName,callback:function(t){e.$set(e.pageModel.data,"serviceName",t)},expression:"pageModel.data.serviceName"}}),a("el-date-picker",{staticClass:"search",attrs:{type:"datetimerange","picker-options":e.pickerOptions,"range-separator":"至","start-placeholder":"创建时间","end-placeholder":"创建时间"},on:{change:e.search},model:{value:e.createdTime,callback:function(t){e.createdTime=t},expression:"createdTime"}}),a("el-button",{staticClass:"search",attrs:{type:"primary",icon:"el-icon-search"},on:{click:function(t){return t.preventDefault(),e.search(t)}}},[e._v("查询 ")])],1)]),a("div",{staticClass:"table-main"},[a("vxe-table",{ref:"mainTable",staticClass:"mytable-scrollbar",attrs:{border:"",resizable:"",height:"100%",size:"medium",align:"center","highlight-hover-row":"","highlight-current-row":"","show-overflow":"","auto-resize":"","keep-source":"",stripe:"","edit-config":{trigger:"click",mode:"row",showStatus:!0},loading:e.loading,data:e.result.items,"mouse-config":{selected:!0},"tree-config":{transform:!0}},on:{"current-change":e.rowSelected}},[a("vxe-column",{attrs:{field:"name",title:"事务名称",width:"200",fixed:"left",align:"left","tree-node":"",sortable:""}}),a("vxe-column",{attrs:{field:"status",title:"事务状态",fixed:"left",width:"120",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[0==r.status?a("el-tag",{attrs:{type:"success"}},[e._v("执行成功")]):1==r.status?a("el-tag",{attrs:{type:"info"}},[e._v("执行中")]):2==r.status?a("el-tag",{attrs:{type:"danger"}},[e._v("执行失败")]):3==r.status?a("el-tag",{attrs:{type:"warning"}},[e._v("已取消")]):e._e()]}}])}),a("vxe-column",{attrs:{field:"retryResult",title:"重试结果",width:"120",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[1==r.retryResult?a("el-tag",{attrs:{type:"success"}},[e._v("成功")]):2==r.retryResult?a("el-tag",{attrs:{type:"danger"}},[e._v("失败")]):e._e()]}}])}),a("vxe-column",{attrs:{field:"retryAction",title:"重试动作",width:"120",sortable:""}}),a("vxe-column",{attrs:{field:"policy",title:"执行策略",width:"120",formatter:["formatSelect",e.policyOptions],sortable:""}}),a("vxe-column",{attrs:{field:"committedCount",title:"向前恢复次数",width:"200",sortable:""}}),a("vxe-column",{attrs:{field:"cancelledCount",title:"向后恢复次数",width:"200",sortable:""}}),a("vxe-column",{attrs:{field:"breakerCount",title:"熔断条件",width:"120",sortable:""}}),a("vxe-column",{attrs:{field:"customCount",title:"先前再后条件",width:"200",sortable:""}}),a("vxe-column",{attrs:{field:"serviceName",title:"服务名称",width:"200",sortable:""}}),a("vxe-column",{attrs:{field:"serviceType",title:"服务类别",width:"120",formatter:["formatSelect",e.serviceOptions],sortable:""}}),a("vxe-column",{attrs:{field:"createdTime",title:"创建时间",width:"200",formatter:["formatDate","yyyy-MM-dd HH:mm:ss"],sortable:""}}),a("vxe-column",{attrs:{field:"beginTime",title:"开始执行时间",width:"200",formatter:["formatDate","yyyy-MM-dd HH:mm:ss"],sortable:""}}),a("vxe-column",{attrs:{field:"endTime",title:"结束执行时间",width:"200",formatter:["formatDate","yyyy-MM-dd HH:mm:ss"],sortable:""}}),a("vxe-column",{attrs:{field:"usedMillSeconds",title:"执行耗时(毫秒)",width:"150",sortable:""}}),a("vxe-column",{attrs:{field:"description",title:"说明",width:"300"}})],1),a("div",{staticStyle:{padding:"5px"}},[a("el-pagination",{attrs:{"current-page":e.pageModel.pageIndex,"page-size":e.pageModel.pageSize,"page-sizes":[15,25,35,45],layout:"total, sizes, prev, pager, next, jumper",total:e.result.totalCount},on:{"size-change":e.sizeChange,"current-change":e.currentChange}})],1)],1),a("div",{staticClass:"table-detail"},[a("vxe-table",{ref:"detailTable",staticClass:"mytable-scrollbar",attrs:{border:"",resizable:"",size:"medium",align:"center","highlight-hover-row":"","highlight-current-row":"","show-overflow":"","auto-resize":"","keep-source":"",stripe:"","edit-config":{trigger:"click",mode:"row",showStatus:!0},loading:e.detailLoading,data:e.detailData,"mouse-config":{selected:!0}}},[a("vxe-column",{attrs:{field:"orderNo",title:"序号",fixed:"left",width:"100",sortable:""}}),a("vxe-column",{attrs:{field:"name",title:"事务单元",fixed:"left",width:"180",sortable:""}}),a("vxe-column",{attrs:{field:"status",title:"事务状态",fixed:"left",width:"120",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[0==r.status?a("el-tag",{attrs:{type:"success"}},[e._v("执行成功")]):1==r.status?a("el-tag",{attrs:{type:"info"}},[e._v("执行中")]):2==r.status?a("el-tag",{attrs:{type:"danger"}},[e._v("执行失败")]):3==r.status?a("el-tag",{attrs:{type:"warning"}},[e._v("已取消")]):e._e()]}}])}),a("vxe-column",{attrs:{field:"retryResult",title:"重试结果",width:"120",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[1==r.retryResult?a("el-tag",{attrs:{type:"success"}},[e._v("成功")]):2==r.retryResult?a("el-tag",{attrs:{type:"danger"}},[e._v("失败")]):e._e()]}}])}),a("vxe-column",{attrs:{field:"retryAction",title:"重试动作",width:"120",sortable:""}}),a("vxe-column",{attrs:{field:"committedCount",title:"向前恢复次数",width:"200",sortable:""}}),a("vxe-column",{attrs:{field:"cancelledCount",title:"向后恢复次数",width:"200",sortable:""}}),a("vxe-column",{attrs:{field:"createdTime",title:"创建时间",width:"200",formatter:["formatDate","yyyy-MM-dd HH:mm:ss"],sortable:""}}),a("vxe-column",{attrs:{field:"beginTime",title:"开始执行时间",width:"200",formatter:["formatDate","yyyy-MM-dd HH:mm:ss"],sortable:""}}),a("vxe-column",{attrs:{field:"endTime",title:"结束执行时间",width:"200",formatter:["formatDate","yyyy-MM-dd HH:mm:ss"],sortable:""}}),a("vxe-column",{attrs:{field:"usedMillSeconds",title:"执行耗时(毫秒)",width:"150",sortable:""}}),a("vxe-column",{attrs:{field:"description",title:"说明",width:"100"}}),a("vxe-column",{attrs:{field:"errorMsg",title:"异常情况",width:"300"}})],1)],1)],2)},i=[],l=(a("ac1f"),a("841c"),a("96cf"),a("1da1")),s={name:"saga",data:function(){return{loading:!1,detailLoading:!1,result:[],detailData:[],createdTime:"",pageModel:{pageSize:15,pageIndex:1,data:{serviceName:"",name:"",createdTime:[]}},serviceOptions:[{value:0,label:"http"},{value:1,label:"grpc"}],policyOptions:[{value:0,label:"向前恢复"},{value:1,label:"向后恢复"},{value:2,label:"先前再后"}],pickerOptions:{shortcuts:[{text:"最近一小时",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-36e5),e.$emit("pick",[a,t])}},{text:"最近一天",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-864e5),e.$emit("pick",[a,t])}},{text:"最近一周",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-6048e5),e.$emit("pick",[a,t])}}]}}},created:function(){this.search()},methods:{rowSelected:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.detail(e.row.id);case 2:case"end":return a.stop()}}),a)})))()},search:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,e.createdTime?e.pageModel.data.createdTime=e.createdTime:e.pageModel.data.createdTime=[],t.next=4,e.$api.SAGA_LIST(e.pageModel);case 4:e.result=t.sent,e.loading=!1;case 6:case"end":return t.stop()}}),t)})))()},detail:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.detailLoading=!0,a.next=3,t.$api.SAGA_DETAIL(e);case 3:t.detailData=a.sent,t.detailLoading=!1;case 5:case"end":return a.stop()}}),a)})))()},sizeChange:function(e){this.pageModel.pageSize=e,this.search()},currentChange:function(e){this.pageModel.pageIndex=e,this.search()}}},n=s,o=(a("67ca"),a("2877")),c=Object(o["a"])(n,r,i,!1,null,"153828d8",null);t["default"]=c.exports},"67ca":function(e,t,a){"use strict";var r=a("f0d5"),i=a.n(r);i.a},f0d5:function(e,t,a){}}]);